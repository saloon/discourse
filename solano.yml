environment:
  'DISCOURSE_HOSTNAME': 'www.example.com'
  'RUBY_GC_MALLOC_LIMIT': '50000000'
test_pattern: 'none'
tests:
 - 'bundle exec rspec -P "spec/components/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/models/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/controllers/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/fixtures/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/services/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/jobs/**/*_spec.rb" || true'
 - 'bundle exec rspec -P "spec/{mailers,integration,fabricators,serializers,support,helpers,phantom_js,integrity,views}/**/*_spec.rb" || true'
 - 'bundle exec rake plugin:spec || true'
 - 'bundle exec rake qunit:test || true'

ruby_version: ruby-2.1.0
hooks:
  worker_setup: "psql -c 'create database discourse_test;' -U postgres && bundle exec rake db:migrate"
